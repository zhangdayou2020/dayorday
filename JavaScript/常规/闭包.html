<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closure</title>
</head>
<body>
    <script>
        /*
          闭包(closure)就是能够读取其他函数内部变量的函数
          在javascript中，只有函数内部的子函数才能读取局部变量，所以闭包可以理解成 “定义在一个函数内部的函数”。
          在本质上，闭包是将函数内部和函数外部连接起来的桥梁。(闭包的最典型的应用是实现回调函数（callback) )。
        */

        /*
            应用场景
            1.在外部访问函数内部的变量
            2.让函数内的局部变量可以一直保存下去
            3.模块化私有属性和公共属性

            参数和变量不会被垃圾回收机制给回收
        */

        /*
            1.setTimeout
　　        原生的setTimeout传递的第一个函数不能带参数，通过闭包可以实现传参效果。

            2.回调定义行为，然后把它关联到某个用户事件上（点击或者按键）。代码通常会作为一个回调（事件触发时调用的函数）绑定到事件。
            3.函数防抖
         　　在事件被触发n秒后再执行回调，如果在这n秒内又被触发，则重新计时。
        　　 实现的关键就在于setTimeOut这个函数，由于还需要一个变量来保存计时，考虑维护全局纯净，可以借助闭包来实现。
        */


        /*
            原理
            全局变量生存周期是永久，局部变量生存周期随着函数的调用结束而销毁。
            闭包就是 在函数中定义且成为该函数内部返回的函数的自由变量 的变量，该变量不会随着外部函数调用结束而销毁。 
           （注：不光是变量，函数内声明的函数也可以形成闭包）
            当函数可以记住并访问所在的词法作用域，即使函数是在当前词法作用域之外执行，这时就产生了闭包


            闭包的缺点：占用内层空间 大量使用闭包会造成 栈溢出
            由于闭包会一直占用内存空间，直到页面销毁，我们可以主动将已使用的闭包销毁：
            将闭包函数赋值为null 可以销毁闭包
        */
    </script>
</body>
</html>